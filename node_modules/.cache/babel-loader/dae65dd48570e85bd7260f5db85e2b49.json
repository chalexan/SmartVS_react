{"ast":null,"code":"var _jsxFileName = \"/Users/chalexan/pt/smartvw/src/components/mainScreen/MainScreen.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { createGuid, convertEnumSdpTypes, convertEnumSdpTypesToNumbers } from \"../../lib/func\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MainScreen = () => {\n  _s();\n\n  const [id, setId] = useState(createGuid());\n  const baseUrl = \"http://84.201.188.97:1443/\";\n  const getOfferUrl = `${baseUrl}api/webrtc/getoffer?id=${id}`;\n  const setAnswerUrl = `${baseUrl}api/webrtc/setanswer?id=${id}`;\n  const setIceCandidateUrl = `${baseUrl}api/webrtc/addicecandidate?id=${id}`;\n  let pc;\n\n  const start = async () => {\n    closePeer();\n    let videoControl = document.querySelector(\"#audioCtl\");\n    const localStream = await navigator.mediaDevices.getUserMedia({\n      video: false,\n      audio: true\n    });\n    videoControl.srcObject = localStream;\n    pc = new RTCPeerConnection(null);\n    localStream.getTracks().forEach(track => {\n      console.log(\"add local track \" + track.kind + \" to peer connection.\");\n      console.log(track);\n      pc.addTrack(track, localStream);\n    });\n\n    pc.onicegatheringstatechange = function () {\n      console.log(\"onicegatheringstatechange: \" + pc.iceGatheringState);\n    };\n\n    pc.oniceconnectionstatechange = function () {\n      console.log(\"oniceconnectionstatechange: \" + pc.iceConnectionState);\n    };\n\n    pc.onsignalingstatechange = function () {\n      console.log(\"onsignalingstatechange: \" + pc.signalingState);\n    };\n\n    pc.onicecandidate = async function (event) {\n      if (event.candidate) {\n        console.log(\"new-ice-candidate:\");\n        console.log(event.candidate.candidate);\n        console.log(event.candidate);\n        await fetch(setIceCandidateUrl, {\n          method: \"POST\",\n          body: JSON.stringify(event.candidate),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      }\n    };\n\n    let offerResponse = await fetch(getOfferUrl);\n    let offer = await offerResponse.json();\n    console.log(\"got offer: \" + offer.type + \" \" + offer.sdp + \".\");\n    offer[\"type\"] = convertEnumSdpTypes(offer.type);\n    await pc.setRemoteDescription(offer);\n    pc.createAnswer().then(function (answer) {\n      console.log(\"cAnswer:\", answer);\n      return pc.setLocalDescription(answer);\n    }).then(async function () {\n      console.log(\"Sending answer SDP.-->,\", pc.localDescription[\"type\"]); //offer[\"type\"] = convertEnumSdpTypes(offer.type);\n\n      console.log(\"SDP: \" + pc.localDescription.sdp);\n      await fetch(setAnswerUrl, {\n        method: \"POST\",\n        body: JSON.stringify(pc.localDescription[\"type\"] = convertEnumSdpTypesToNumbers(pc.localDescription.type)),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n    });\n  };\n\n  function closePeer() {\n    if (pc != null) {\n      console.log(\"close peer\");\n      pc.close();\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        class: \"navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"navbar-brand\",\n            href: \"\",\n            children: \"ProgressTerra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"navbar-toggler\",\n            type: \"button\",\n            \"data-toggle\": \"collapse\",\n            \"data-target\": \".navbar-collapse\",\n            \"aria-controls\": \"navbarSupportedContent\",\n            \"aria-expanded\": \"false\",\n            \"aria-label\": \"Toggle navigation\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"navbar-toggler-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              class: \"navbar-nav flex-grow-1\",\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                class: \"nav-item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        role: \"main\",\n        class: \"pb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"script\", {\n          type: \"text/javascript\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"display-4\",\n            children: \"SmartVW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"WebRTC ASP.Net Example with the\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n              target: \"_blank\",\n              href: \"https://github.com/sipsorcery/sipsorcery\",\n              children: \"SIPSorcery WebRTC Library\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: \"\",\n          autoplay: \"autoplay\",\n          id: \"audioCtl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"btn btn-success\",\n            onClick: () => start(),\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"btn btn-success\",\n            onClick: () => closePeer(),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      class: \"border-top footer text-muted\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: \"\\xA9 2021 - ProgressTerra -\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n      src: \"./Home Page - WebRTC ASP.Net_files/jquery.min.js\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n      src: \"./Home Page - WebRTC ASP.Net_files/bootstrap.bundle.min.js\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n      src: \"./Home Page - WebRTC ASP.Net_files/site.js\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MainScreen, \"5WHVgt819sDI5ncQrNGZRbNrQYI=\");\n\n_c = MainScreen;\nexport default MainScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainScreen\");","map":{"version":3,"sources":["/Users/chalexan/pt/smartvw/src/components/mainScreen/MainScreen.jsx"],"names":["useState","createGuid","convertEnumSdpTypes","convertEnumSdpTypesToNumbers","MainScreen","id","setId","baseUrl","getOfferUrl","setAnswerUrl","setIceCandidateUrl","pc","start","closePeer","videoControl","document","querySelector","localStream","navigator","mediaDevices","getUserMedia","video","audio","srcObject","RTCPeerConnection","getTracks","forEach","track","console","log","kind","addTrack","onicegatheringstatechange","iceGatheringState","oniceconnectionstatechange","iceConnectionState","onsignalingstatechange","signalingState","onicecandidate","event","candidate","fetch","method","body","JSON","stringify","headers","offerResponse","offer","json","type","sdp","setRemoteDescription","createAnswer","then","answer","setLocalDescription","localDescription","close"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SACEC,UADF,EAEEC,mBAFF,EAGEC,4BAHF,QAIO,gBAJP;;;;AAMA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcN,QAAQ,CAACC,UAAU,EAAX,CAA5B;AACA,QAAMM,OAAO,GAAG,4BAAhB;AACA,QAAMC,WAAW,GAAI,GAAED,OAAQ,0BAAyBF,EAAG,EAA3D;AACA,QAAMI,YAAY,GAAI,GAAEF,OAAQ,2BAA0BF,EAAG,EAA7D;AACA,QAAMK,kBAAkB,GAAI,GAAEH,OAAQ,iCAAgCF,EAAG,EAAzE;AAEA,MAAIM,EAAJ;;AAEA,QAAMC,KAAK,GAAG,YAAY;AACxBC,IAAAA,SAAS;AAET,QAAIC,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAnB;AAEA,UAAMC,WAAW,GAAG,MAAMC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAC5DC,MAAAA,KAAK,EAAE,KADqD;AAE5DC,MAAAA,KAAK,EAAE;AAFqD,KAApC,CAA1B;AAIAR,IAAAA,YAAY,CAACS,SAAb,GAAyBN,WAAzB;AAEAN,IAAAA,EAAE,GAAG,IAAIa,iBAAJ,CAAsB,IAAtB,CAAL;AAEAP,IAAAA,WAAW,CAACQ,SAAZ,GAAwBC,OAAxB,CAAiCC,KAAD,IAAW;AACzCC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqBF,KAAK,CAACG,IAA3B,GAAkC,sBAA9C;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAhB,MAAAA,EAAE,CAACoB,QAAH,CAAYJ,KAAZ,EAAmBV,WAAnB;AACD,KAJD;;AAMAN,IAAAA,EAAE,CAACqB,yBAAH,GAA+B,YAAY;AACzCJ,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgClB,EAAE,CAACsB,iBAA/C;AACD,KAFD;;AAIAtB,IAAAA,EAAE,CAACuB,0BAAH,GAAgC,YAAY;AAC1CN,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiClB,EAAE,CAACwB,kBAAhD;AACD,KAFD;;AAIAxB,IAAAA,EAAE,CAACyB,sBAAH,GAA4B,YAAY;AACtCR,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAA6BlB,EAAE,CAAC0B,cAA5C;AACD,KAFD;;AAIA1B,IAAAA,EAAE,CAAC2B,cAAH,GAAoB,gBAAgBC,KAAhB,EAAuB;AACzC,UAAIA,KAAK,CAACC,SAAV,EAAqB;AACnBZ,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,KAAK,CAACC,SAAN,CAAgBA,SAA5B;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAYU,KAAK,CAACC,SAAlB;AAEA,cAAMC,KAAK,CAAC/B,kBAAD,EAAqB;AAC9BgC,UAAAA,MAAM,EAAE,MADsB;AAE9BC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,KAAK,CAACC,SAArB,CAFwB;AAG9BM,UAAAA,OAAO,EAAE;AAAE,4BAAgB;AAAlB;AAHqB,SAArB,CAAX;AAKD;AACF,KAZD;;AAcA,QAAIC,aAAa,GAAG,MAAMN,KAAK,CAACjC,WAAD,CAA/B;AACA,QAAIwC,KAAK,GAAG,MAAMD,aAAa,CAACE,IAAd,EAAlB;AACArB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBmB,KAAK,CAACE,IAAtB,GAA6B,GAA7B,GAAmCF,KAAK,CAACG,GAAzC,GAA+C,GAA3D;AACAH,IAAAA,KAAK,CAAC,MAAD,CAAL,GAAgB9C,mBAAmB,CAAC8C,KAAK,CAACE,IAAP,CAAnC;AAEA,UAAMvC,EAAE,CAACyC,oBAAH,CAAwBJ,KAAxB,CAAN;AAEArC,IAAAA,EAAE,CAAC0C,YAAH,GACGC,IADH,CACQ,UAAUC,MAAV,EAAkB;AACtB3B,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB0B,MAAxB;AACA,aAAO5C,EAAE,CAAC6C,mBAAH,CAAuBD,MAAvB,CAAP;AACD,KAJH,EAKGD,IALH,CAKQ,kBAAkB;AACtB1B,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuClB,EAAE,CAAC8C,gBAAH,CAAoB,MAApB,CAAvC,EADsB,CAEtB;;AACA7B,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAUlB,EAAE,CAAC8C,gBAAH,CAAoBN,GAA1C;AACA,YAAMV,KAAK,CAAChC,YAAD,EAAe;AACxBiC,QAAAA,MAAM,EAAE,MADgB;AAExBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CACHlC,EAAE,CAAC8C,gBAAH,CAAoB,MAApB,IAA8BtD,4BAA4B,CACzDQ,EAAE,CAAC8C,gBAAH,CAAoBP,IADqC,CADvD,CAFkB;AAOxBJ,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAPe,OAAf,CAAX;AASD,KAlBH;AAmBD,GAvED;;AAyEA,WAASjC,SAAT,GAAqB;AACnB,QAAIF,EAAE,IAAI,IAAV,EAAgB;AACdiB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAlB,MAAAA,EAAE,CAAC+C,KAAH;AACD;AACF;;AACD,sBACE;AAAA,4BACE;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,kGAAX;AAAA,+BACE;AAAK,UAAA,KAAK,EAAC,WAAX;AAAA,kCACE;AAAG,YAAA,KAAK,EAAC,cAAT;AAAwB,YAAA,IAAI,EAAC,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AACE,YAAA,KAAK,EAAC,gBADR;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,2BAAY,UAHd;AAIE,2BAAY,kBAJd;AAKE,6BAAc,wBALhB;AAME,6BAAc,OANhB;AAOE,0BAAW,mBAPb;AAAA,mCASE;AAAM,cAAA,KAAK,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA,kBAJF,eAeE;AAAK,YAAA,KAAK,EAAC,+DAAX;AAAA,mCACE;AAAI,cAAA,KAAK,EAAC,wBAAV;AAAA,qCACE;AAAI,gBAAA,KAAK,EAAC;AAAV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eA0BE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA,6BACE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAkB,QAAA,KAAK,EAAC,MAAxB;AAAA,gCACE;AAAQ,UAAA,IAAI,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADF,eAGE;AAAK,UAAA,KAAK,EAAC,aAAX;AAAA,kCACE;AAAI,YAAA,KAAK,EAAC,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,0DACkC,GADlC,eAEE;AACE,cAAA,MAAM,EAAC,QADT;AAEE,cAAA,IAAI,EAAC,0CAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,eAiBE;AAAO,UAAA,QAAQ,EAAC,EAAhB;AAAmB,UAAA,QAAQ,EAAC,UAA5B;AAAuC,UAAA,EAAE,EAAC;AAA1C;AAAA;AAAA;AAAA;AAAA,gBAjBF,eAmBE;AAAA,kCACE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,KAAK,EAAC,iBAFR;AAGE,YAAA,OAAO,EAAE,MAAM9C,KAAK,EAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,eASE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,KAAK,EAAC,iBAFR;AAGE,YAAA,OAAO,EAAE,MAAMC,SAAS,EAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA1BF,eAkEE;AAAQ,MAAA,KAAK,EAAC,8BAAd;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAlEF,eAqEE;AAAQ,MAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,YArEF,eAsEE;AAAQ,MAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,YAtEF,eAuEE;AAAQ,MAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,YAvEF;AAAA,kBADF;AA2ED,CAnKD;;GAAMT,U;;KAAAA,U;AAqKN,eAAeA,UAAf","sourcesContent":["import { useState } from \"react\";\nimport {\n  createGuid,\n  convertEnumSdpTypes,\n  convertEnumSdpTypesToNumbers,\n} from \"../../lib/func\";\n\nconst MainScreen = () => {\n  const [id, setId] = useState(createGuid());\n  const baseUrl = \"http://84.201.188.97:1443/\";\n  const getOfferUrl = `${baseUrl}api/webrtc/getoffer?id=${id}`;\n  const setAnswerUrl = `${baseUrl}api/webrtc/setanswer?id=${id}`;\n  const setIceCandidateUrl = `${baseUrl}api/webrtc/addicecandidate?id=${id}`;\n\n  let pc;\n\n  const start = async () => {\n    closePeer();\n\n    let videoControl = document.querySelector(\"#audioCtl\");\n\n    const localStream = await navigator.mediaDevices.getUserMedia({\n      video: false,\n      audio: true,\n    });\n    videoControl.srcObject = localStream;\n\n    pc = new RTCPeerConnection(null);\n\n    localStream.getTracks().forEach((track) => {\n      console.log(\"add local track \" + track.kind + \" to peer connection.\");\n      console.log(track);\n      pc.addTrack(track, localStream);\n    });\n\n    pc.onicegatheringstatechange = function () {\n      console.log(\"onicegatheringstatechange: \" + pc.iceGatheringState);\n    };\n\n    pc.oniceconnectionstatechange = function () {\n      console.log(\"oniceconnectionstatechange: \" + pc.iceConnectionState);\n    };\n\n    pc.onsignalingstatechange = function () {\n      console.log(\"onsignalingstatechange: \" + pc.signalingState);\n    };\n\n    pc.onicecandidate = async function (event) {\n      if (event.candidate) {\n        console.log(\"new-ice-candidate:\");\n        console.log(event.candidate.candidate);\n        console.log(event.candidate);\n\n        await fetch(setIceCandidateUrl, {\n          method: \"POST\",\n          body: JSON.stringify(event.candidate),\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n    };\n\n    let offerResponse = await fetch(getOfferUrl);\n    let offer = await offerResponse.json();\n    console.log(\"got offer: \" + offer.type + \" \" + offer.sdp + \".\");\n    offer[\"type\"] = convertEnumSdpTypes(offer.type);\n\n    await pc.setRemoteDescription(offer);\n\n    pc.createAnswer()\n      .then(function (answer) {\n        console.log(\"cAnswer:\", answer);\n        return pc.setLocalDescription(answer);\n      })\n      .then(async function () {\n        console.log(\"Sending answer SDP.-->,\", pc.localDescription[\"type\"]);\n        //offer[\"type\"] = convertEnumSdpTypes(offer.type);\n        console.log(\"SDP: \" + pc.localDescription.sdp);\n        await fetch(setAnswerUrl, {\n          method: \"POST\",\n          body: JSON.stringify(\n            (pc.localDescription[\"type\"] = convertEnumSdpTypesToNumbers(\n              pc.localDescription.type\n            ))\n          ),\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      });\n  };\n\n  function closePeer() {\n    if (pc != null) {\n      console.log(\"close peer\");\n      pc.close();\n    }\n  }\n  return (\n    <>\n      <header>\n        <nav class=\"navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3\">\n          <div class=\"container\">\n            <a class=\"navbar-brand\" href=\"\">\n              ProgressTerra\n            </a>\n            <button\n              class=\"navbar-toggler\"\n              type=\"button\"\n              data-toggle=\"collapse\"\n              data-target=\".navbar-collapse\"\n              aria-controls=\"navbarSupportedContent\"\n              aria-expanded=\"false\"\n              aria-label=\"Toggle navigation\"\n            >\n              <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse\">\n              <ul class=\"navbar-nav flex-grow-1\">\n                <li class=\"nav-item\"></li>\n              </ul>\n            </div>\n          </div>\n        </nav>\n      </header>\n      <div class=\"container\">\n        <main role=\"main\" class=\"pb-3\">\n          <script type=\"text/javascript\">{/* Скрипт перенесен выше */}</script>\n\n          <div class=\"text-center\">\n            <h1 class=\"display-4\">SmartVW</h1>\n            <p>\n              WebRTC ASP.Net Example with the{\" \"}\n              <a\n                target=\"_blank\"\n                href=\"https://github.com/sipsorcery/sipsorcery\"\n              >\n                SIPSorcery WebRTC Library\n              </a>\n              .\n            </p>\n          </div>\n\n          <audio controls=\"\" autoplay=\"autoplay\" id=\"audioCtl\"></audio>\n\n          <div>\n            <button\n              type=\"button\"\n              class=\"btn btn-success\"\n              onClick={() => start()}\n            >\n              Start\n            </button>\n            <span> </span>\n            <button\n              type=\"button\"\n              class=\"btn btn-success\"\n              onClick={() => closePeer()}\n            >\n              Close\n            </button>\n          </div>\n        </main>\n      </div>\n\n      <footer class=\"border-top footer text-muted\">\n        <div class=\"container\">© 2021 - ProgressTerra -</div>\n      </footer>\n      <script src=\"./Home Page - WebRTC ASP.Net_files/jquery.min.js\"></script>\n      <script src=\"./Home Page - WebRTC ASP.Net_files/bootstrap.bundle.min.js\"></script>\n      <script src=\"./Home Page - WebRTC ASP.Net_files/site.js\"></script>\n    </>\n  );\n};\n\nexport default MainScreen;\n"]},"metadata":{},"sourceType":"module"}